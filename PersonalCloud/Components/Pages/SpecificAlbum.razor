@page "/album/{AlbumName}"
@inject IMediaService MediaService

<h3>Album: @AlbumName</h3>
<ul>
    @foreach (var media in albumMediaList)
    {
        <li>@media</li>
    }
</ul>

<h4>Add Media to Album</h4>
<select @bind="selectedMedia">
    @foreach (var media in allMediaList)
    {
        <option value="@media">@media</option>
    }
</select>
<button @onclick="AddMediaToAlbum">Add</button>

@code {
    [Parameter] public string AlbumName { get; set; }
    private List<string> albumMediaList = new List<string>();
    private List<string> allMediaList = new List<string>();
    private string selectedMedia;

    protected override void OnInitialized()
    {
        RefreshMedia();
    }

    private void RefreshMedia()
    {
        albumMediaList = MediaService.GetAlbumMedia(AlbumName).ToList();
        allMediaList = MediaService.GetAllMedia().ToList();
    }

    private void AddMediaToAlbum()
    {
        if (!string.IsNullOrEmpty(selectedMedia))
        {
            MediaService.AddMediaToAlbum(AlbumName, selectedMedia);
            RefreshMedia();
        }
    }
}
